---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

interface Product {
	title: string;
	category: string;
	description: string;
	link: string;
	tags: string[];
	color: string;
	status?: string;
	schemaCategory?: string;
	schemaFeature?: string;
	schemaPrice?: string;
}

const products: Product[] = [
	{
		title: "Get Target Resume",
		category: "Intelligent Resume Compiler",
		description:
			"<b>Anti-subscription</b>. Start with <b>1 Free Credit</b>. Uses <b>Advanced AI models</b> to craft perfect resumes.",
		link: "https://gettargetresume.com",
		tags: ["AI Engineering", "SaaS", "Stripe"],
		color: "bg-blue-50",
		schemaCategory: "BusinessApplication",
		schemaFeature: "AI Resume Tailoring",
		schemaPrice: "4.99",
	},
	{
		title: "Sum to Reader",
		category: "Efficiency Utility",
		description:
			"Fights screen fatigue by converting web articles to <b>digital book formats</b> via a <b>Headless</b>, <b>High-Efficiency</b> 'Email-to-Summary' flow.",
		link: "https://sumtoreader.com",
		tags: ["Automation", "Kindle", "Serverless"],
		color: "bg-orange-50",
		status: "Beta",
		schemaCategory: "UtilitiesApplication",
		schemaFeature: "Email-to-e-book conversion",
	},
	{
		title: "ESL Fiction",
		category: "Content Discovery Engine",
		description:
			"Mobile-first, <b>Frictionless Access</b> PWA. Eliminating the friction of traditional passwords with secure, no-password OTP flows.",
		link: "https://eslfiction.com",
		tags: ["PWA", "Education", "No-Code DB"],
		color: "bg-green-50",
		status: "Alpha",
		schemaCategory: "EducationalApplication",
	},
];
---

<section id="solutions" class="py-24 px-6 md:px-12 max-w-6xl mx-auto">
	<div class="mb-16">
		<h2 class="text-3xl md:text-4xl font-bold text-soft-charcoal mb-4">
			Solutions.
		</h2>
		<p class="text-lg text-soft-charcoal/70 max-w-xl">
			A collection of independent products solving real pain points. No bloat,
			just utility.
		</p>
	</div>

	<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
		{
			products.map((product) => (
				<a
					href={product.link}
					target="_blank"
					rel="noopener noreferrer"
					class="group relative flex flex-col h-full bg-white rounded-2xl p-6 border border-soft-charcoal/5 transition-all duration-300 shadow-sm hover:shadow-md hover:-translate-y-1 block"
				>
					<script
						type="application/ld+json"
						set:html={JSON.stringify({
							"@context": "https://schema.org",
							"@type": "SoftwareApplication",
							name: product.title,
							applicationCategory: product.schemaCategory || "WebApplication",
							description: product.description.replace(/<[^>]*>?/gm, ""),
							operatingSystem: "Web",
							featureList: product.schemaFeature
								? [product.schemaFeature]
								: undefined,
							offers: {
								"@type": "Offer",
								price: product.schemaPrice || "0",
								priceCurrency: "USD",
							},
						})}
					/>
					<div
						class={`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl ${product.color} -z-10`}
					/>

					<div class="mb-6 relative">
						<div class="flex justify-between items-start">
							<span class="text-xs font-bold uppercase tracking-wider text-soft-charcoal/50">
								{product.category}
							</span>
							{product.status && (
								<span
									class={`px-2 py-0.5 text-[10px] uppercase font-bold tracking-wider rounded-full ${
										product.status === "Alpha" || product.status === "Beta"
											? "text-gray-500 bg-gray-100"
											: "text-penguin-orange bg-penguin-orange/10"
									}`}
								>
									{product.status}
								</span>
							)}
						</div>
						<h3 class="text-xl font-bold text-soft-charcoal mt-2 mb-3">
							<span class="before:absolute before:inset-0 focus:outline-none">
								{product.title}
							</span>
						</h3>
						<p
							class="text-soft-charcoal/80 text-sm leading-relaxed"
							set:html={product.description}
						/>
					</div>

					<div class="mt-auto pt-6 border-t border-black/5 flex flex-wrap gap-2 justify-between items-center">
						<div class="flex flex-wrap gap-2">
							{product.tags.map((tag) => (
								<span class="text-xs py-1 px-2 rounded-md bg-black/5 text-soft-charcoal/70">
									{tag}
								</span>
							))}
						</div>
						<span class="text-xs font-semibold text-penguin-orange flex items-center gap-1 group-hover:gap-2 transition-all">
							View Live
							<Icon
								name="tabler:arrow-up-right"
								class="w-3 h-3 transition-transform group-hover:-translate-y-0.5 group-hover:translate-x-0.5"
							/>
						</span>
					</div>
				</a>
			))
		}
	</div>
</section>
